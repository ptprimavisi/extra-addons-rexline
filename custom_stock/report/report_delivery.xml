<odoo>
    <data>
        <record id="action_report_delivery" model="ir.actions.report">
            <field name="name">Report Delivery</field>
            <field name="model">stock.picking</field>
            <field name="report_type">qweb-pdf</field>
            <field name="report_name">custom_stock.report_action_delivery</field>
            <field name="report_file">custom_stock.report_action_delivery</field>
            <field name="print_report_name">"DO - " + object.partner_id.name + " - " + (object.origin if object.origin else object.name)</field>
        </record>
        
        <template id="report_action_delivery">

            <t t-call="web.html_container">
                <t t-call="web.external_layout">
                    <t t-set="doc" t-value="docs"/>
                    <t t-set="doc" t-value="doc.with_context(lang=doc.partner_id.lang)"/>

                    <t t-foreach="[0, 1, 2, 3, 4, 5]" t-as="index">
                        <t t-set="page_name">
                            <t t-if="index == 0">Lembar 1 Untuk Difile</t>
                            <t t-elif="index == 1">Lembar 2 Untuk dikembalikan ke PT. REXLINE ENGINEERING INDONESIA</t>
                            <t t-elif="index == 2">Lembar 3 Untuk dikembalikan ke PT. REXLINE ENGINEERING INDONESIA</t>
                            <t t-elif="index == 3">Lembar 4 Untuk Vendor</t>
                            <t t-elif="index == 4">Lembar 5 Untuk Driver Vendor</t>
                            <t t-elif="index == 5">Lembar 6 Untuk Security</t>
                            <t t-else="">Lembar Tidak Dikenal</t> <!-- Optional default case -->
                        </t>

                        <!-- Add page break for each page -->
                        <t t-if="index &gt; 0">
                            <div style="page-break-before: always;"/>
                        </t>

                        <div class="row mb-1 p-1" style="font-family: Calibri, sans-serif;">
                            <div class="col-2">
                                <img src='/custom_stock/static/src/img/company_logo.png' style="width: 120px; height: auto;"/>
                            </div>

                            <div class="col-10" style="font-family: Calibri, sans-serif; text-align: center;">
                                <h3><strong>DELIVERY ORDER</strong></h3>
                                <p>Delivery Order #<t t-esc="doc.name"/></p>
                            </div>
                        </div>

                        <!-- Delivery Details -->
                        <div class="row mb-1 p-1" style="font-family: Calibri, sans-serif;">
                            <div class="col-8">
                                <strong><t t-esc="doc.company_id.name"/></strong><br/>
                                <t t-esc="doc.company_id.partner_id.street"/><br/>
                                <t t-esc="doc.company_id.partner_id.street2"/><br/>
                                <t t-esc="doc.company_id.partner_id.city"/>, <t t-esc="doc.company_id.partner_id.zip"/><br/>
                                <t t-esc="doc.company_id.partner_id.website"/>
                            </div>
                            
                            <div class="col-4">
                                <div><strong>Order Date:</strong> <t t-esc="doc.group_id.sale_id.date_order"/></div>
                                <div><strong>Delivery Date:</strong> <t t-esc="doc.scheduled_date"/></div>
                                <div><strong>Sales Order:</strong> <t t-esc="doc.group_id.sale_id.ref_quotation"/></div>
                                <div><strong>PO Number:</strong></div>
                                <div><strong>No Truck:</strong></div>
                            </div>
                        </div>

                        <div class="row mb-1 p-1" style="font-family: Calibri, sans-serif;">
                            <t t-if="index in [1, 2]">
                                <div class="col-8">
                                    <strong>Delivery To:</strong><br/>
                                    <t t-esc="doc.partner_id.name"/><br/>
                                    <t t-esc="doc.partner_id.street"/><br/>
                                    <t t-esc="doc.partner_id.street2"/>, <t t-esc="doc.partner_id.city"/>, <t t-esc="doc.partner_id.zip"/><br/>
                                    <strong>PIC:</strong> <t t-esc="doc.user_id.partner_id.name"/> (<t t-esc="doc.user_id.partner_id.phone"/>)
                                </div>
                                <div class="col-4">
                                    <table style="width: 70%; border-collapse: collapse; margin-top: 20px; font-family: Calibri, sans-serif; border: 2px solid red;">
                                        <tr>
                                            <th style="padding: 5px; color: red;">KEMBALI KE LAMONGAN</th>
                                        </tr>
                                    </table>
                                </div>
                            </t>
                            <t t-else="">
                                <div>
                                    <strong>Delivery To:</strong><br/>
                                    <t t-esc="doc.partner_id.name"/><br/>
                                    <t t-esc="doc.partner_id.street"/><br/>
                                    <t t-esc="doc.partner_id.street2"/>, <t t-esc="doc.partner_id.city"/>, <t t-esc="doc.partner_id.zip"/><br/>
                                    <strong>PIC:</strong> <t t-esc="doc.user_id.partner_id.name"/> (<t t-esc="doc.user_id.partner_id.phone"/>)
                                </div>
                            </t>
                        </div>

                        <table style="width: 100%; border-collapse: collapse; margin-top: 20px; font-family: Calibri, sans-serif;" border="1">
                            <thead style="background-color: #87ceeb;">
                                <tr>
                                    <th style="padding: 5px;">ITEM #</th>
                                    <th style="padding: 5px;">ITEM &amp; DESCRIPTION</th>
                                    <th style="padding: 5px;">QTY</th>
                                    <th style="padding: 5px;">UOM</th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-set="counter" t-value="1"/>  <!-- Initialize counter -->
                                <t t-foreach="doc.move_ids" t-as="line">
                                    <tr>
                                        <td style="padding: 5px; text-align: center;">
                                            <t t-esc="counter"/>  <!-- Display counter -->
                                            <t t-set="counter" t-value="counter + 1"/>  <!-- Increment counter -->
                                        </td>
                                        <td style="padding: 5px;"><t t-esc="line.description_picking"/></td>
                                        <td style="padding: 5px; text-align: center;"><t t-esc="line.quantity"/></td>
                                        <td style="padding: 5px; text-align: center;"><t t-esc="line.product_uom.name"/></td>
                                    </tr>
                                </t>
                            </tbody>
                        </table>
                        
                        <div style="margin-top: 20px; font-family: Calibri, sans-serif;">
                            <div class="row mb-1 p-1 text-center">
                                <div class="col-6">Prepared By, <br/><strong><t t-esc="doc.company_id.name"/></strong></div>
                                <div class="col-6">Received By, <br/><strong>Customer</strong></div>
                            </div>
                            <div class="row mb-1 p-1 text-center" style="margin-top: 50px;">
                                <div class="col-6">( .................................. )</div>
                                <div class="col-6">( .................................. )</div>
                            </div>
                        </div>

                        <div style="margin-top: 20px;">
                            <span style="font-size: 12px; color: #daa520;">
                                <t t-esc="page_name"/>
                            </span>
                        </div>
                    </t>
                </t>
            </t>


        </template>
    </data>
</odoo>
